import{i as N,r as M,a as L,o as P,w as S,b as Q,c as W,d as l,u as w,e as R,F as D,f as _}from"./index-2xKx2NCw.js";import{_ as G}from"./CardList-qwjBRVjS.js";const H="/web-shop/search.svg";var k=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function V(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var J="Expected a function",C=NaN,U="[object Symbol]",X=/^\s+|\s+$/g,q=/^[-+]0x[0-9a-f]+$/i,z=/^0b[01]+$/i,K=/^0o[0-7]+$/i,Y=parseInt,Z=typeof k=="object"&&k&&k.Object===Object&&k,ee=typeof self=="object"&&self&&self.Object===Object&&self,te=Z||ee||Function("return this")(),re=Object.prototype,ne=re.toString,oe=Math.max,ae=Math.min,T=function(){return te.Date.now()};function se(e,r,i){var u,a,c,p,s,d,y=0,h=!1,m=!1,t=!0;if(typeof e!="function")throw new TypeError(J);r=E(r)||0,F(i)&&(h=!!i.leading,m="maxWait"in i,c=m?oe(E(i.maxWait)||0,r):c,t="trailing"in i?!!i.trailing:t);function o(n){var v=u,b=a;return u=a=void 0,y=n,p=e.apply(b,v),p}function f(n){return y=n,s=setTimeout(g,r),h?o(n):p}function I(n){var v=n-d,b=n-y,O=r-v;return m?ae(O,c-b):O}function x(n){var v=n-d,b=n-y;return d===void 0||v>=r||v<0||m&&b>=c}function g(){var n=T();if(x(n))return A(n);s=setTimeout(g,I(n))}function A(n){return s=void 0,t&&u?o(n):(u=a=void 0,p)}function B(){s!==void 0&&clearTimeout(s),y=0,u=d=a=s=void 0}function $(){return s===void 0?p:A(T())}function j(){var n=T(),v=x(n);if(u=arguments,a=this,d=n,v){if(s===void 0)return f(d);if(m)return s=setTimeout(g,r),o(d)}return s===void 0&&(s=setTimeout(g,r)),p}return j.cancel=B,j.flush=$,j}function F(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function ie(e){return!!e&&typeof e=="object"}function ce(e){return typeof e=="symbol"||ie(e)&&ne.call(e)==U}function E(e){if(typeof e=="number")return e;if(ce(e))return C;if(F(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=F(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(X,"");var i=z.test(e);return i||K.test(e)?Y(e.slice(2),i?2:8):q.test(e)?C:+e}var de=se;const fe=V(de),le={class:"flex justify-between items-center"},ue=l("h2",{class:"text-3xl font-bold mb-8"},"All sneakers",-1),pe={class:"flex items-center gap-4"},me=l("option",{value:"name"},"by name",-1),ve=l("option",{value:"price"},"by price(cheap)",-1),ye=l("option",{value:"-price"},"by price(expensive)",-1),be=[me,ve,ye],he={class:"relative"},ge=l("img",{class:"absolute top-3 left-4",src:H,alt:"search icon"},null,-1),Ie={__name:"Home",setup(e){const{cart:r,addToCart:i,removeFromCart:u}=N("cart"),a=M([]),c=L({sortBy:"title",searchQuery:""}),p=t=>{t.isAdded?u(t):i(t)},s=t=>{c.sortBy=t.target.value},d=fe(t=>{c.searchQuery=t.target.value},300),y=async t=>{try{if(t.isFavorite)await _.delete(`https://5c2ef9148b61d8a7.mokky.dev/favorites/${t.favoriteId}`),t.isFavorite=!1,t.favoriteId=null;else{const o={item_id:t.id},{data:f}=await _.post("https://5c2ef9148b61d8a7.mokky.dev/favorites",o);t.isFavorite=!0,t.favoriteId=f.id}}catch(o){console.error("App Error add to Favorites(sneakers)",o)}},h=async()=>{try{const{data:t}=await _.get("https://5c2ef9148b61d8a7.mokky.dev/favorites");a.value=a.value.map(o=>{const f=t.find(I=>I.item_id===o.id);return f?{...o,isFavorite:!0,favoriteId:f.id}:o})}catch(t){console.error("App Error get Favorites(sneakers)",t)}},m=async()=>{try{const t={sortBy:c.sortBy};c.searchQuery&&(t.title=`*${c.searchQuery}*`);const{data:o}=await _.get("https://5c2ef9148b61d8a7.mokky.dev/items",{params:t});a.value=o.map(f=>({...f,isFavorite:!1,favoriteId:null,isAdded:!1}))}catch(t){console.error("App Error get Items(sneakers)",t)}};return P(async()=>{r.value=JSON.parse(localStorage.getItem("cart"))||[],await m(),await h(),a.value=a.value.map(t=>({...t,isAdded:r.value.some(o=>o.id===t.id)}))}),S(r,()=>{a.value=a.value.map(t=>({...t,isAdded:!1}))}),S(c,m),(t,o)=>(Q(),W(D,null,[l("div",le,[ue,l("form",pe,[l("select",{onChange:s,class:"py-2 px-3 border rounded-md outline-none"},be,32),l("div",he,[ge,l("input",{onInput:o[0]||(o[0]=(...f)=>w(d)&&w(d)(...f)),class:"border rounded-md py-2 pl-11 pr-4 outline-none focus:border-gray-400",placeholder:"Search",type:"serch"},null,32)])])]),R(G,{items:a.value,onAddToFavorite:y,onAddToCart:p},null,8,["items"])],64))}};export{Ie as default};
